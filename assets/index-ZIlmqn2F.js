var I=Object.defineProperty;var R=(i,e,s)=>e in i?I(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var u=(i,e,s)=>R(i,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}})();const v=445,b="white",H=565,w="yellow",k=50,E="yellow",P=80,A=50,D=25,O=1e3,q=[{visibility:100,disguise:1,disguiseWithAttack:7.14,disguiseWithMove:27.11,disguiseWithMoveAndAttack:5.67,isHaveCommandersDevice:!1,isCommandersDeviceInSlot:!1,isLeftModernization:!1,isRightModernization:!1,name:"test0",id:1},{visibility:200,disguise:2,disguiseWithAttack:7.14,disguiseWithMove:27.11,disguiseWithMoveAndAttack:5.67,isHaveCommandersDevice:!1,isCommandersDeviceInSlot:!1,isLeftModernization:!1,isRightModernization:!1,name:"test1",id:2},{visibility:300,disguise:3,disguiseWithAttack:7.14,disguiseWithMove:27.11,disguiseWithMoveAndAttack:5.67,isHaveCommandersDevice:!1,isCommandersDeviceInSlot:!1,isLeftModernization:!1,isRightModernization:!1,name:"test2",id:3},{visibility:400,disguise:4,disguiseWithAttack:7.14,disguiseWithMove:27.11,disguiseWithMoveAndAttack:5.67,isHaveCommandersDevice:!1,isCommandersDeviceInSlot:!1,isLeftModernization:!1,isRightModernization:!1,name:"test3",id:4},{visibility:500,disguise:5,disguiseWithAttack:7.14,disguiseWithMove:27.11,disguiseWithMoveAndAttack:5.67,isHaveCommandersDevice:!1,isCommandersDeviceInSlot:!1,isLeftModernization:!1,isRightModernization:!1,name:"test4",id:5},{visibility:600,disguise:6,disguiseWithAttack:7.14,disguiseWithMove:27.11,disguiseWithMoveAndAttack:5.67,isHaveCommandersDevice:!1,isCommandersDeviceInSlot:!1,isLeftModernization:!1,isRightModernization:!1,name:"test5",id:6},{visibility:700,disguise:7,disguiseWithAttack:7.14,disguiseWithMove:27.11,disguiseWithMoveAndAttack:5.67,isHaveCommandersDevice:!1,isCommandersDeviceInSlot:!1,isLeftModernization:!1,isRightModernization:!1,name:"test6",id:7}];class p{constructor(e="null",s=479,l=34.18,r=7.14,a=27.11,h=5.67,W=!1,S=!1,C=!1,z=!1){u(this,"visibility");u(this,"disguise");u(this,"disguiseWithAttack");u(this,"disguiseWithMove");u(this,"disguiseWithMoveAndAttack");u(this,"isHaveCommandersDevice");u(this,"isCommandersDeviceInSlot");u(this,"isLeftModernization");u(this,"isRightModernization");u(this,"name");u(this,"id");let L=new Date().getTime();this.id=L,this.name=e,this.visibility=s,this.disguise=l,this.disguiseWithAttack=r,this.disguiseWithMove=a,this.disguiseWithMoveAndAttack=h,this.isHaveCommandersDevice=W,this.isCommandersDeviceInSlot=S,this.isLeftModernization=C,this.isRightModernization=z}}const t={width:0,height:0,centerWidth:0,centerHeight:0,lineWidth:1,lineColor:"white",koef:1,centerColor:"white",centerRadius:5,enemyColor:"#990000",enemySize:16,isManyTree:!0,isTreeAndDryTree:!1,isTree:!1,isDryTree:!1,isClear:!1,isMovieng:!1,isAttack:!1};let f=q,n=new p("test",522,51.21,9.22,51.21,9.22,!0,!0,!1,!0),o=new p;const M=document.querySelector("#map"),c=M.getContext("2d"),_=()=>{const i=(e,s,l)=>{document.querySelector(e).addEventListener(s,r=>{l(r),T()})};i("#mainTankVisibility","input",e=>d(n,"visibility",e.target.value)),i("#mainTankDisguise","input",e=>d(n,"disguise",e.target.value)),i("#mainTankDisguiseWithAttack","input",e=>d(n,"disguiseWithAttack",e.target.value)),i("#mainTankDisguiseWithMove","input",e=>d(n,"disguiseWithMove",e.target.value)),i("#mainTankDisguiseWithMoveAndAttack","input",e=>d(n,"disguiseWithMoveAndAttack",e.target.value)),i("#enemyTankVisibility","input",e=>d(o,"visibility",e.target.value)),i("#enemyTankDisguise","input",e=>d(o,"disguise",e.target.value)),i("#enemyTankDisguiseWithAttack","input",e=>d(o,"disguiseWithAttack",e.target.value)),i("#enemyTankDisguiseWithMove","input",e=>d(o,"disguiseWithMove",e.target.value)),i("#enemyTankDisguiseWithMoveAndAttack","input",e=>d(o,"disguiseWithMoveAndAttack",e.target.value)),i("#manyTree","input",e=>{g(),d(t,"isManyTree",e.target.checked)}),i("#treeAndDryTree","input",e=>{g(),d(t,"isTreeAndDryTree",e.target.checked)}),i("#tree","input",e=>{g(),d(t,"isTree",e.target.checked)}),i("#dryTree","input",e=>{g(),d(t,"isDryTree",e.target.checked)}),i("#clear","input",e=>{g(),d(t,"isClear",e.target.checked)}),i("#isNotMovieng","input",e=>{d(t,"isMovieng",!1)}),i("#isMovieng","input",e=>{d(t,"isMovieng",!0)}),i("#isNotAttack","input",e=>{d(t,"isAttack",!1)}),i("#isAttack","input",e=>{d(t,"isAttack",!0)}),i("#mainCommandersDevice","input",e=>{d(n,"isHaveCommandersDevice",e.target.checked)}),i("#enemyCommandersDevice","input",e=>{d(o,"isHaveCommandersDevice",e.target.checked)}),i("#mainCommandersDeviceSlot","input",e=>{d(n,"isCommandersDeviceInSlot",e.target.checked)}),i("#enemyCommandersDeviceSlot","input",e=>{d(o,"isCommandersDeviceInSlot",e.target.checked)}),i("#mainLeftModernization","input",e=>{e.target.checked?(m(n,"left"),document.querySelector("#mainRightModernization").checked=!1):m(n)}),i("#mainRightModernization","input",e=>{e.target.checked?(m(n,"right"),document.querySelector("#mainLeftModernization").checked=!1):m(n)}),i("#enemyLeftModernization","input",e=>{e.target.checked?(m(o,"left"),document.querySelector("#enemyRightModernization").checked=!1):m(o)}),i("#enemyRightModernization","input",e=>{e.target.checked?(m(o,"right"),document.querySelector("#enemyLeftModernization").checked=!1):m(o)}),i("#swap","click",e=>{let s=n;n=o,o=s,y()}),i("#mainTankSelect","click",e=>{let s=e.target;if(s.localName=="div"){console.log(s),document.querySelector("#nameMainTank").value=s.textContent;let l=s.getAttribute("data-id");for(let a=0;a<f.length;a++)if(f[a].id==l){console.log(f[a]),n=f[a],y();break}document.querySelector("#mainTankSelect .select__options").classList.remove("select__options_active"),document.onclick=""}}),i("#nameMainTank","click",e=>{let s=document.querySelector("#mainTankSelect .select__options");s.classList.add("select__options_active"),document.onclick=l;function l(r){let a=document.querySelector("#mainTankSelect");console.log(r.target),a.contains(r.target)||(s.classList.remove("select__options_active"),document.onclick="")}})};function m(i,e){i.isLeftModernization=!1,i.isRightModernization=!1,e=="left"?i.isLeftModernization=!0:e=="right"&&(i.isRightModernization=!0)}function N(i){i.innerHTML="",f.forEach(e=>{let s=document.createElement("div");s.classList.add("option"),s.setAttribute("data-id",e.id),s.innerText=e.name,i.append(s)})}function y(){const i=(s,l)=>{document.querySelector(s).value=l},e=(s,l)=>{document.querySelector(s).checked=l};i("#mainTankVisibility",n.visibility),i("#mainTankDisguise",n.disguise),i("#mainTankDisguiseWithAttack",n.disguiseWithAttack),i("#mainTankDisguiseWithMove",n.disguiseWithMove),i("#mainTankDisguiseWithMoveAndAttack",n.disguiseWithMoveAndAttack),e("#mainCommandersDevice",n.isHaveCommandersDevice),e("#mainCommandersDeviceSlot",n.isCommandersDeviceInSlot),e("#mainLeftModernization",n.isLeftModernization),e("#mainRightModernization",n.isRightModernization),i("#enemyTankVisibility",o.visibility),i("#enemyTankDisguise",o.disguise),i("#enemyTankDisguiseWithAttack",o.disguiseWithAttack),i("#enemyTankDisguiseWithMove",o.disguiseWithMove),i("#enemyTankDisguiseWithMoveAndAttack",o.disguiseWithMoveAndAttack),e("#enemyCommandersDevice",o.isHaveCommandersDevice),e("#enemyCommandersDeviceSlot",o.isCommandersDeviceInSlot),e("#enemyLeftModernization",o.isLeftModernization),e("#enemyRightModernization",o.isRightModernization)}function g(){t.isManyTree=!1,t.isTreeAndDryTree=!1,t.isTree=!1,t.isDryTree=!1,t.isClear=!1}const x=()=>{_(),t.width=M.clientWidth,t.height=M.clientHeight,t.centerWidth=t.width/2,t.centerHeight=t.height/2,c.lineWidth=t.lineWidth,t.koef=O/t.width,N(document.querySelector(".select__options")),T(),y()};x();function d(i,e,s){i[e]=s?+s:0}function V(){let i=0,e=0,s=o.disguise,l=0;t.isMovieng?(s=t.isAttack?o.disguiseWithMoveAndAttack:o.disguiseWithMove,n.isHaveCommandersDevice&&(l+=10,n.isCommandersDeviceInSlot&&(l+=2.5)),n.isLeftModernization?l+=2.62:n.isRightModernization&&(l-=2.62)):s=t.isAttack?o.disguiseWithAttack:o.disguise,t.isManyTree?i=P:t.isTreeAndDryTree?i=A+D:t.isTree?i=A:t.isDryTree&&(i=D),i>0&&(n.isRightModernization?e+=2.4:n.isLeftModernization&&(e-=2.4),n.isHaveCommandersDevice&&(e+=15,n.isCommandersDeviceInSlot&&(e+=5))),s=s-s*l/100,i=i-i*e/100;let r=s+i,a=n.visibility-(n.visibility-50)*r/100;return a<k&&(a=k),a>v&&(a=v),a}function T(){c.clearRect(0,0,t.width,t.height),G(),Y(),B(),F();let i=V();U(i),X(i.toFixed(2))}function X(i=""){document.querySelector("#distance").innerText=i}function U(i){c.fillStyle=t.enemyColor,c.fillRect(t.centerWidth+i/t.koef-t.enemySize/2,t.centerHeight-t.enemySize/2,t.enemySize,t.enemySize)}function G(){c.fillStyle=t.centerColor,c.beginPath(),c.arc(t.centerWidth,t.centerHeight,t.centerRadius/t.koef,0,2*Math.PI),c.fill(),c.closePath()}function Y(){c.strokeStyle=E,c.beginPath(),c.arc(t.centerWidth,t.centerHeight,k/t.koef,0,2*Math.PI),c.stroke(),c.closePath()}function B(){c.strokeStyle=b,c.beginPath(),c.arc(t.centerWidth,t.centerHeight,v/t.koef,0,2*Math.PI),c.stroke(),c.closePath()}function F(){c.strokeStyle=w,c.beginPath(),c.arc(t.centerWidth,t.centerHeight,H/t.koef,0,2*Math.PI),c.stroke(),c.closePath()}
